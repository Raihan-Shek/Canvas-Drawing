:root{--primary-color:#000;--secondary-color:#663343;--background-color:#f4f4f9;--panel-bg-color:#fff;--border-color:#ddd;--shadow-color:rgba(0,0,0,.15);--active-layer-bg:var(--secondary-color);--handle-color:var(--primary-color)}body{background:linear-gradient(to bottom,var(--background-color),#e0e0e9);box-sizing:border-box;display:flex;flex-direction:row;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;gap:20px;margin:0;min-height:100vh;padding:20px}#toggle-controls{background:var(--primary-color);border:none;border-radius:4px;box-shadow:0 2px 5px var(--shadow-color);color:#fff;cursor:pointer;padding:8px 16px;position:fixed;right:10px;top:10px;transition:background .2s,transform .1s;z-index:10}#toggle-controls:hover{background:var(--secondary-color);transform:scale(1.05)}#canvas-container{background:#fff;border:2px solid #333;border-radius:12px;box-shadow:0 4px 12px var(--shadow-color);flex-grow:1;min-width:300px;position:relative}canvas{border-radius:10px;cursor:crosshair;display:block;height:100%;touch-action:none;width:100%}.controls{background:var(--panel-bg-color);border-radius:12px;box-shadow:0 4px 12px var(--shadow-color);display:flex;flex-direction:column;gap:15px;max-height:calc(100vh - 40px);min-width:300px;overflow-y:auto;padding:20px;transition:all .3s ease;width:300px}.controls.hidden{margin:0;min-width:0;opacity:0;padding:0;pointer-events:none;transform:translateX(100%);width:0}.controls h3{border-bottom:1px solid var(--border-color);color:#333;font-size:1.2em;margin:0 0 10px;padding-bottom:5px}.controls button,.controls input,.controls label,.controls select{margin-bottom:0}.controls button{background:var(--primary-color);border:none;border-radius:6px;color:#fff;cursor:pointer;padding:10px;transition:background .2s,transform .1s}.controls button:hover{background:var(--secondary-color);transform:scale(1.02)}.controls button.active{background:#135622;transform:scale(1.02)}.controls button:disabled{background:#ccc;cursor:not-allowed}.tool-group{display:grid;gap:8px;grid-template-columns:repeat(3,1fr)}details#layersAccordion{border:1px solid var(--border-color);border-radius:6px;padding:10px;user-select:none}summary{cursor:pointer;font-weight:700;outline:none}.layer-item{background:#e9ecef;border-radius:6px;cursor:pointer;display:flex;flex-direction:column;gap:5px;margin-bottom:5px;padding:10px;transition:background .2s,box-shadow .2s}.layer-item:hover{background:#d4d9de}.layer-info{align-items:center;display:flex;justify-content:space-between}.layer-buttons button{font-size:.9em;margin-left:5px;padding:4px 8px}.layer-item.active .layer-buttons button{color:var(--primary-color)}.layer-item.active .layer-buttons button:hover{background:#f0f0f0}.opacity-slider{cursor:grab;width:100%}#textModal{background:var(--panel-bg-color);border-radius:12px;box-shadow:0 8px 25px rgba(0,0,0,.4);display:none;left:50%;min-width:300px;padding:30px;position:fixed;top:50%;transform:translate(-50%,-50%);z-index:1000}#textModal h4{margin-top:0}#textModal input{border:1px solid var(--border-color);border-radius:6px;box-sizing:border-box;margin-bottom:20px;padding:10px;width:100%}#textModal button{margin-right:10px;min-width:80px}@media (max-width:1024px){body{flex-direction:column;gap:10px;padding:10px}#canvas-container{height:50vh;max-width:100%;min-height:300px;order:1;width:100%}.controls{max-height:none;max-height:40vh;min-width:100%;order:2;padding:15px;width:100%}#toggle-controls{bottom:10px;position:fixed;right:10px;top:auto;z-index:1100}.controls.hidden{gap:0;margin-bottom:-15px;max-height:0;padding:0 15px}#textModal{box-sizing:border-box;width:90%}}@media (max-width:480px){.tool-group{grid-template-columns:repeat(2,1fr)}}.layer-item.active{background:var(--active-layer-bg);box-shadow:0 2px 4px rgba(0,0,0,.2);color:#fff}.layer-item.active .layer-buttons button{background:#fff;color:var(--secondary-color)}#textModal button:focus,#textModal input:focus,.controls button:focus,.controls input:focus,.controls select:focus,.layer-item:focus{outline:3px solid #ffc107;outline-offset:2px}
